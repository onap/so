<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_19c8rxx" targetNamespace="http://bpmn.io/schema/bpmn" exporter="Camunda Modeler" exporterVersion="1.14.0">
  <bpmn:process id="DoAllocateCoreNSSI" name="DoAllocateCoreNSSI.bpmn" isExecutable="true">
    <bpmn:startEvent id="allocateNSSI_startEvent" name="Start Flow">
      <bpmn:outgoing>SequenceFlow_0bjz7up</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:sequenceFlow id="SequenceFlow_0bjz7up" sourceRef="allocateNSSI_startEvent" targetRef="processRequest_ScriptTask" />
    <bpmn:sequenceFlow id="SequenceFlow_1xiszom" sourceRef="processRequest_ScriptTask" targetRef="ScriptTask_13krb7d" />
    <bpmn:sequenceFlow id="SequenceFlow_1r5aycw" sourceRef="ScriptTask_0ybe0w9" targetRef="CallActivity_0eiwrsr" />
    <bpmn:exclusiveGateway id="ExclusiveGateway_1xjahhp">
      <bpmn:incoming>Flow_0kbpihh</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1scva4p</bpmn:outgoing>
      <bpmn:outgoing>SequenceFlow_1ygklb8</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:sequenceFlow id="SequenceFlow_1scva4p" name="No Existing &#10;s-nssai" sourceRef="ExclusiveGateway_1xjahhp" targetRef="CallActivity_0ue7vug" />
    <bpmn:sequenceFlow id="SequenceFlow_1ygklb8" sourceRef="ExclusiveGateway_1xjahhp" targetRef="CallActivity_0e6drr2">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">#{execution.getVariable("solutions") !=null }</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="SequenceFlow_0enouyb" sourceRef="ScriptTask_13krb7d" targetRef="ScriptTask_0ybe0w9" />
    <bpmn:endEvent id="EndEvent_1e80uuk">
      <bpmn:incoming>SequenceFlow_0tytimn</bpmn:incoming>
      <bpmn:incoming>SequenceFlow_0tubodn</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:scriptTask id="processRequest_ScriptTask" name="Preprocess request" scriptFormat="groovy">
      <bpmn:incoming>SequenceFlow_0bjz7up</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1xiszom</bpmn:outgoing>
      <bpmn:script>import org.onap.so.bpmn.infrastructure.scripts.*
def allocateNssi = new DoAllocateCoreNSSI()
allocateNssi.preProcessRequest(execution)</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="ScriptTask_13krb7d" name="Get NSST name from CatalogDB" scriptFormat="groovy">
      <bpmn:incoming>SequenceFlow_1xiszom</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0enouyb</bpmn:outgoing>
      <bpmn:script>import org.onap.so.bpmn.infrastructure.scripts.*
def allocateNssi = new DoAllocateCoreNSSI()
allocateNssi.getNSSTName(execution)</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="ScriptTask_0ybe0w9" name="Prepare OOF request" scriptFormat="groovy">
      <bpmn:incoming>SequenceFlow_0enouyb</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1r5aycw</bpmn:outgoing>
      <bpmn:script>import org.onap.so.bpmn.infrastructure.scripts.*
def allocateNssi = new DoAllocateCoreNSSI()
allocateNssi.prepareOOFRequest(execution)</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="ScriptTask_1bg09vu" name="Process OOF Async&#10;ressponse" scriptFormat="groovy">
      <bpmn:incoming>SequenceFlow_1g1chq1</bpmn:incoming>
      <bpmn:outgoing>Flow_0kbpihh</bpmn:outgoing>
      <bpmn:script>import org.onap.so.bpmn.infrastructure.scripts.*
def allocateNssi = new DoAllocateCoreNSSI()
allocateNssi.processOOFAsyncResponse(execution)</bpmn:script>
    </bpmn:scriptTask>
    <bpmn:callActivity id="CallActivity_0ue7vug" name="Call non-shared sliceÂ flow" calledElement="DoAllocateCoreNonSharedSlice">
      <bpmn:incoming>SequenceFlow_1scva4p</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0tubodn</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:callActivity id="CallActivity_0e6drr2" name="Call shared slice flow&#10;" calledElement="DoAllocateCoreSharedSlice">
      <bpmn:incoming>SequenceFlow_1ygklb8</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_0tytimn</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:sequenceFlow id="Flow_0kbpihh" sourceRef="ScriptTask_1bg09vu" targetRef="ExclusiveGateway_1xjahhp" />
    <bpmn:sequenceFlow id="SequenceFlow_0tytimn" sourceRef="CallActivity_0e6drr2" targetRef="EndEvent_1e80uuk" />
    <bpmn:sequenceFlow id="SequenceFlow_0tubodn" sourceRef="CallActivity_0ue7vug" targetRef="EndEvent_1e80uuk" />
    <bpmn:callActivity id="CallActivity_0eiwrsr" name="Call OOF subprocess" calledElement="DoHandleOofRequest">
      <bpmn:incoming>SequenceFlow_1r5aycw</bpmn:incoming>
      <bpmn:outgoing>SequenceFlow_1g1chq1</bpmn:outgoing>
    </bpmn:callActivity>
    <bpmn:sequenceFlow id="SequenceFlow_1g1chq1" sourceRef="CallActivity_0eiwrsr" targetRef="ScriptTask_1bg09vu" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="DoAllocateCoreNSSI">
      <bpmndi:BPMNEdge id="Flow_0kbpihh_di" bpmnElement="Flow_0kbpihh">
        <di:waypoint x="768" y="180" />
        <di:waypoint x="829" y="180" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="753.5" y="155" width="90" height="20" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0enouyb_di" bpmnElement="SequenceFlow_0enouyb">
        <di:waypoint x="368" y="184" />
        <di:waypoint x="401" y="184" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="339.5" y="163" width="90" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1ygklb8_di" bpmnElement="SequenceFlow_1ygklb8">
        <di:waypoint x="854" y="205" />
        <di:waypoint x="854" y="266" />
        <di:waypoint x="896" y="266" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="824" y="229.5" width="90" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1scva4p_di" bpmnElement="SequenceFlow_1scva4p">
        <di:waypoint x="854" y="155" />
        <di:waypoint x="854" y="115" />
        <di:waypoint x="896" y="115" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="797" y="116" width="55" height="24" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1r5aycw_di" bpmnElement="SequenceFlow_1r5aycw">
        <di:waypoint x="501" y="184" />
        <di:waypoint x="530" y="184" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="470.5" y="163" width="90" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_1xiszom_di" bpmnElement="SequenceFlow_1xiszom">
        <di:waypoint x="243" y="184" />
        <di:waypoint x="268" y="184" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="210.5" y="163" width="90" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0bjz7up_di" bpmnElement="SequenceFlow_0bjz7up">
        <di:waypoint x="95" y="184" />
        <di:waypoint x="143" y="184" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="74" y="163" width="90" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="allocateNSSI_startEvent">
        <dc:Bounds x="59" y="166" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="53" y="209" width="50" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="ExclusiveGateway_1xjahhp_di" bpmnElement="ExclusiveGateway_1xjahhp" isMarkerVisible="true">
        <dc:Bounds x="829" y="155" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="975" y="284" width="90" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_1e80uuk_di" bpmnElement="EndEvent_1e80uuk">
        <dc:Bounds x="1076" y="166" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1180" y="312" width="90" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1eo0wn0_di" bpmnElement="processRequest_ScriptTask">
        <dc:Bounds x="143" y="144" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0cs9cfh_di" bpmnElement="ScriptTask_13krb7d">
        <dc:Bounds x="268" y="144" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1v669aj_di" bpmnElement="ScriptTask_0ybe0w9">
        <dc:Bounds x="401" y="144" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_19cc8m2_di" bpmnElement="ScriptTask_1bg09vu">
        <dc:Bounds x="668" y="140" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_04schfi_di" bpmnElement="CallActivity_0ue7vug">
        <dc:Bounds x="896" y="75" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1vy16mp_di" bpmnElement="CallActivity_0e6drr2">
        <dc:Bounds x="896" y="226" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_0tytimn_di" bpmnElement="SequenceFlow_0tytimn">
        <di:waypoint x="996" y="266" />
        <di:waypoint x="1036" y="266" />
        <di:waypoint x="1036" y="184" />
        <di:waypoint x="1076" y="184" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1051" y="219" width="0" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_0tubodn_di" bpmnElement="SequenceFlow_0tubodn">
        <di:waypoint x="996" y="115" />
        <di:waypoint x="1036" y="115" />
        <di:waypoint x="1036" y="184" />
        <di:waypoint x="1076" y="184" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1051" y="143.5" width="0" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="CallActivity_0eiwrsr_di" bpmnElement="CallActivity_0eiwrsr">
        <dc:Bounds x="530" y="144" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1g1chq1_di" bpmnElement="SequenceFlow_1g1chq1">
        <di:waypoint x="630" y="180" />
        <di:waypoint x="668" y="180" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="649" y="159" width="0" height="12" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
